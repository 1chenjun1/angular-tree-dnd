(function(){angular.module("template/treeTable/treeTable.html",[]).run(["$templateCache",function(a){a.put("template/treeTable/treeTable.html",'<table ng-class="tree_class">\n    <thead>\n  <tr>\n     <th ng-class="expandingProperty.titleClass" ng-style="expandingProperty.titleStyle">\n         {{expandingProperty.displayName || expandingProperty.field || expandingProperty}}\n        </th>\n        <th ng-repeat="col in colDefinitions" ng-class="col.titleClass" ng-style="col.titleStyle">\n         {{col.displayName || col.field}}\n     </th>\n    </tr>\n    </thead>\n <tbody>\n  <tr tree-table-node="row" ng-repeat="row in tree_rows track by hashedTree(row) " ng-show="row.__visible__"\n     ng-class="(row.__selected__ ? \' active\':\'\')">\n        <td ng-if="!expandingProperty.template" tree-table-node-handle\n         ng-style="expandingProperty.cellStyle ? expandingProperty.cellStyle : {\'padding-left\': $callbacks.calsIndent(row.__level__)}"\n          ng-click="user_clicks_branch(row)" ng-class="expandingProperty.cellClass"\n            compile="expandingProperty.cellTemplate">\n              <a data-nodrag>\n                  <i ng-class="row.__tree_icon__" ng-click="row.__expanded__ = !row.__expanded__"\n                     class="tree-icon"></i>\n              </a>\n             {{row[expandingProperty.field] || row[expandingProperty]}}\n       </td>\n        <td ng-if="expandingProperty.template" compile="expandingProperty.template"></td>\n        <td ng-repeat="col in colDefinitions" ng-class="col.cellClass" ng-style="col.cellStyle"\n            compile="col.cellTemplate">\n            {{row[col.field]}}\n       </td>\n    </tr>\n    </tbody>\n</table>')}]);angular.module("treeTable",["template/treeTable/treeTable.html"]).directive("compile",["$compile",function(a){return{restrict:"A",link:function(d,c,b){d.$watch(b.compile,function(e){if(e!=null){var f=a(e);var g=f(d);c.empty().append(g)}})}}}]).directive("treeTable",["$timeout","$window","treeTableTemplate","tgConfig","$TreeTableHelper",function(a,e,c,b,d){return{restrict:"E",replace:true,scope:{treeData:"=",columnDefs:"=",expandOn:"=",onSelect:"&",onClick:"&",treeControl:"=",tree:"=treeControl",tree_data:"=treeData",callbacks:"=",primaryKey:"="},templateUrl:function(f,g){return g.templateUrl||c.getPath()},controller:["$scope","$element","$attrs","tgConfig",function(h,g,f,i){h.dragEnabled=true;h.dragDelay=0;h.indent=20;h.indent_plus=15;h.indent_unit="px";h.tree_class="table";h.primary_key="__uid__";h.$callbacks={accept:function(k,j,l){return true},beforeDrag:function(j){return true},dropped:function(m,o){if(o){var r=m.node,j=m.target;var k=null;var p=null;var q=0;if(r.__parent__===null){k=h.treeData;p=null}else{p=h.tree_rows[r.__parent__];k=p.__children__}var n=k;if(j!==null){if(j.__level__==m.level){if(r.__parent__!==j.__parent__){if(j.__parent__===null){n=h.treeData;p=null}else{p=h.tree_rows[j.__parent__];n=p.__children__}}q=j.__index__+1}else{if(j.__level__<m.level){n=j.__children__;p=j}else{while(j.__level__>m.level){if(j.__parent__!==null){j=h.tree_rows[j.__parent__]}else{break}}if(j.__parent__===null){n=h.treeData;p=null}else{p=h.tree_rows[j.__parent__];n=p.__children__}q=j.__index__+1}}}else{n=h.treeData;p=null}if(n!=k||r.__index__!=q){if(n===k){if(q>r.__index__){q--}}var l=k.splice(r.__index__,1)[0];n.splice(q,0,l);m.move={parent:p,pos:q};return true}}return false},dragStart:function(j){},dragMove:function(j){},dragStop:function(j,k){},beforeDrop:function(j){return true},calsIndent:function(l,k){var j=h.indent_unit?h.indent_unit:"px";if(!k){j=h.indent_unit?h.indent_unit:"px"}else{j=""}if(l-1<1){return h.indent_plus+j}else{return(h.indent*(l-1))+h.indent_plus+j}},dragEnabled:function(){return h.dragEnabled}};h.accept=function(k,j){return h.$callbacks.accept(k,h,j)};h.beforeDrag=function(j){return h.$callbacks.beforeDrag(j)};h.safeApply=function(k){var j=this.$root.$$phase;if(j=="$apply"||j=="$digest"){if(k&&(typeof(k)==="function")){k()}}else{this.$apply(k)}};h.prev=function(j){if(j>0){return h.tree_rows[j-1]}return null};h.next=function(j){if(j>0){return h.tree_rows[j-1]}return null};h.hashedTree=function(j){if(h.primary_key=="__uid__"){return j.__index_real__+"#"+j.__index__+"#"+j.__uid__}else{return j.__index_real__+"#"+j.__index__+"#"+j[h.primary_key]}}}],link:function(g,h,r){g.$type="TreeTable";d.calsIndent=g.$callbacks.calsIndent;g.$watch(r.primaryKey,function(i){if(typeof i==="string"){g.primary_key=i}},true);g.$watch(r.callbacks,function(i){angular.forEach(i,function(z,n){if(typeof z==="function"){if(g.$callbacks[n]){g.$callbacks[n]=z}}});d.calsIndent=g.$callbacks.calsIndent},true);if(angular.isString(r["class"])){g.tree_class=r["class"]}if(angular.isString(r.indentUnit)){g.indent_unit=r.indentUnit}g.$watch(r.dragEnabled,function(i){if((typeof i)=="boolean"){g.dragEnabled=i}});g.$watch(r.indent,function(i){if((typeof i)=="number"){g.indent=i}});g.$watch(r.indentPlus,function(i){if((typeof i)=="number"){g.indent_plus=i}});g.$watch(r.dragDelay,function(i){if((typeof i)=="number"){g.dragDelay=i}});g.config={};angular.extend(g.config,b);g.$watch(r.config,function(i){angular.extend(g.config,i)},true);var o,w,s,p;r.iconExpand=r.iconExpand?r.iconExpand:"icon-plus  glyphicon glyphicon-plus  fa fa-plus";r.iconCollapse=r.iconCollapse?r.iconCollapse:"icon-minus glyphicon glyphicon-minus fa fa-minus";r.iconLeaf=r.iconLeaf?r.iconLeaf:"icon-file  glyphicon glyphicon-file  fa fa-file";r.expandLevel=r.expandLevel?r.expandLevel:"3";w=parseInt(r.expandLevel,10);if(!g.treeData){g.treeData=[]}if(r.expandOn){o=g.expandOn;g.expandingProperty=g.expandOn}else{if(g.treeData.length){var k=g.treeData[0],j=Object.keys(k);for(var t=0,u=j.length;t<u;t++){if(typeof(k[j[t]])==="string"){o=j[t];break}}if(!o){o=j[0]}g.expandingProperty=o}}g.colDefinitions=g.columnDefs||[];var m=function(B){var n,A,i,z;n=function(D,G){B(D,G);if(D.__children__!=null){var F,C,E;E=D.__children__;for(F=0,C=E.length;F<C;F++){n(E[F],G+1)}}};z=g.treeData;for(A=0,i=z.length;A<i;A++){n(z[A],1)}};var y=null;var v=function(i){if(!i){if(y!=null){y.__selected__=false}y=null;return}if(i!==y){if(y!=null){y.__selected__=false}i.__selected__=true;y=i;l(i);if(i.onSelect!=null){return a(function(){return i.onSelect(i)})}else{if(g.onSelect!=null){return a(function(){return g.onSelect({branch:i})})}}}};g.on_user_click=function(i){if(g.onClick){g.onClick({branch:i})}};g.user_clicks_branch=function(i){if(i!==y){return v(i)}};var x=function(i){if(i.__parent__!==null&&i.__parent__>-1&&i.__parent__<g.tree_rows.length){return g.tree_rows[i.__parent__]}return null};var q=function(z,n){var i;i=x(z);if(i!=null){n(i);return q(i,n)}};var l=function(i){return q(i,function(n){return n.__expanded__=true})};g.tree_rows=[];var f=function(){var i,A;A=g.treeData;i=A.length;var z=[];if(i>0){var B,n;n=function(J,K,D,E,G){var F,I,C;if(!angular.isArray(J.__children__)){J.__children__=[]}J.__parent__=K;I=J.__children__.length;if(J.__expanded__==null&&I>0){J.__expanded__=D<w}if(I===0){C=r.iconLeaf}else{if(J.__expanded__){C=r.iconCollapse}else{C=r.iconExpand}}var L=z.length;J.__index__=G;J.__index_real__=L;J.__level__=D;J.__tree_icon__=C;J.__visible__=E;if(J.__uid__==null){J.__uid__=""+Math.random()}z.push(J);var H=1;if(I>0){for(F=0;F<I;F++){H=H+n(J.__children__[F],L,D+1,E&&J.__expanded__,F)}}return J.__dept__=H};for(B=0;B<i;B++){n(A[B],null,1,true,B)}}g.tree_rows=z;return g.tree_rows};g.$watch("treeData",f,true);f();if(g.treeControl!=null){if(angular.isObject(g.treeControl)){p=g.treeControl;p.expand_all=function(){m(function(i,n){i.__expanded__=true})};p.collapse_all=function(){m(function(i,n){i.__expanded__=false})};p.get_first_branch=function(){s=g.treeData.length;if(s>0){return g.treeData[0]}return null};p.select_first_branch=function(){var i;i=p.get_first_branch();return p.select_branch(i)};p.get_selected_branch=function(){return y};p.get_parent_branch=function(i){return x(i)};p.select_branch=function(i){v(i);return i};p.get_children=function(i){return i.__children__};p.select_parent_branch=function(i){var n;if(i==null){i=p.get_selected_branch()}if(i!=null){n=p.get_parent_branch(i);if(n!=null){p.select_branch(n);return n}}};p.add_branch=function(n,z,i){if((typeof i)!="number"){if(n!=null){n.__children__.push(z);n.__expanded__=true}else{g.treeData.push(z)}}else{if(n!=null){n.__children__.splice(i,0,z);n.__expanded__=true}else{g.treeData.splice(i,0,z)}}return z};p.add_root_branch=function(i){p.add_branch(null,i);return i};p.remove_branch=function(z){z=z||p.get_selected_branch();if(z){var n;if(z.__parent__!==null){n=p.get_parent_branch(z).__children__}else{n=g.treeData}var i=n.indexOf(z);n.splice(i,1);y=null}};p.expand_branch=function(i){if(i==null){i=p.get_selected_branch()}if(i!=null){i.__expanded__=true;return i}};p.collapse_branch=function(i){if(i==null){i=y}if(i!=null){i.__expanded__=false;return i}};p.get_siblings=function(i){var n,z;if(i==null){i=y}if(i!=null){n=p.get_parent_branch(i);if(n){z=n.__children__}else{z=g.treeData}return z}};p.get_next_sibling=function(n){var z,A;if(n==null){n=y}if(n!=null){A=p.get_siblings(n);s=A.length;z=A.indexOf(n);if(z<s){return A[z+1]}}};p.get_prev_sibling=function(n){var z,A;if(n==null){n=y}A=p.get_siblings(n);s=A.length;z=A.indexOf(n);if(z>0){return A[z-1]}};p.select_next_sibling=function(i){var n;if(i==null){i=y}if(i!=null){n=p.get_next_sibling(i);if(n!=null){return p.select_branch(n)}}};p.select_prev_sibling=function(i){var n;if(i==null){i=y}if(i!=null){n=p.get_prev_sibling(i);if(n!=null){return p.select_branch(n)}}};p.get_first_child=function(i){var n;if(i==null){i=y}if(i!=null){if(((n=i.__children__)!=null?n.length:void 0)>0){return i.__children__[0]}}};p.get_closest_ancestor_next_sibling=function(i){var z,n;z=p.get_next_sibling(i);if(z!=null){return z}else{n=p.get_parent_branch(i);return p.get_closest_ancestor_next_sibling(n)}};p.get_next_branch=function(i){var n;if(i==null){i=y}if(i!=null){n=p.get_first_child(i);if(n!=null){return n}else{n=p.get_closest_ancestor_next_sibling(i);return n}}};p.select_next_branch=function(i){var n;if(i==null){i=y}if(i!=null){n=p.get_next_branch(i);if(n!=null){p.select_branch(n);return n}}};p.last_descendant=function(i){var n;if(i==null){}s=i.__children__.length;if(s===0){return i}else{n=i.__children__[s-1];return p.last_descendant(n)}};p.get_prev_branch=function(i){var n,z;if(i==null){i=y}if(i!=null){z=p.get_prev_sibling(i);if(z!=null){return p.last_descendant(z)}else{n=p.get_parent_branch(i);return n}}};p.reload_data=function(){return f()};p.select_prev_branch=function(i){var n;if(i==null){i=y}if(i!=null){n=p.get_prev_branch(i);if(n!=null){p.select_branch(n);return n}}}}}}}}]).directive("treeTableNode",["$window","$document","$timeout","$TreeTableHelper",function(d,c,a,b){return{restrict:"A",replace:true,controller:["$scope","$element","$attrs","tgConfig",function(g,f,e,h){g.$modelValue=null;g.$nodeScope=g;g.childNodesCount=function(){return g.childNodes().length};g.childNodes=function(){return g.$modelValue.__children__};g.init=function(i){};g.safeApply=function(j){var i=this.$root.$$phase;if(i=="$apply"||i=="$digest"){if(j&&(typeof(j)==="function")){j()}}else{this.$apply(j)}};g.expand=function(i){if(i.__children__.length>0){i.__expanded__=!i.__expanded__}};g.prev=function(){return g.$parent.prev(g.$modelValue.__index_real__)};g.next=function(){return g.$parent.next(g.$modelValue.__index_real__)};g.getPrev=function(i){return g.$parent.prev(i)};g.getNext=function(i){return g.$parent.next(i)};g.node=function(){return g.$modelValue};g.data=function(){return g.$modelValue};g.visible=function(i){if(i!=null){return i.__visible__?i:g.visible(g.tree_rows[i.__parent__])}return null}}],link:function(h,j,t){h.$element=j;h.$type="TreeTableNode";if(h.config.nodeClass){j.addClass(h.config.nodeClass)}h.$watch(t.treeTableNode,function(G,E,F){F.$modelValue=G},true);h.init();var x="ontouchstart" in window;var D,s,g,n;var f,B;var k=true;var l=false;var i=null;var q=document.body,r=document.documentElement,u,m;var A=function(K){if(!x&&(K.button==2||K.which==3)){return}if(K.uiTreeDragging||(K.originalEvent&&K.originalEvent.uiTreeDragging)){return}var N=angular.element(K.target);var I=N.scope();if(!I||!I.$type){return}if(I.$type!="TreeTableNode"&&I.$type!="TreeTableNodeHandle"){return}if(I.$type!="TreeTableNodeHandle"){return}var G=N.prop("tagName").toLowerCase();if(G=="input"||G=="textarea"||G=="button"||G=="select"){return}while(N&&N[0]&&N[0]!=j){if(b.nodrag(N)){return}N=N.parent()}if(!h.beforeDrag(h)){return}K.uiTreeDragging=true;if(K.originalEvent){K.originalEvent.uiTreeDragging=true}K.preventDefault();var L=b.eventObj(K);s=true;g=b.dragInfo(h);var F=h.$element.prop("tagName").toLowerCase();if(F.toLowerCase()==="tr"){f=angular.element(d.document.createElement("tr"));var M=h.colDefinitions.length,H;f.append(angular.element(d.document.createElement("td")).addClass(h.config.emptyTreeClass).addClass("indented").addClass(h.config.placeHolderClass));while(M-->0){f.append(angular.element(d.document.createElement("td")).addClass(h.config.emptyTreeClass).addClass(h.config.placeHolderClass))}}else{f=angular.element(d.document.createElement("li")).addClass(h.config.emptyTreeClass).addClass(h.config.placeHolderClass)}n=b.positionStarted(L,h.$element);f.css("width",b.width(h.$element)+"px");b.replaceIndent(f,g.level);if(F==="tr"){B=angular.element(d.document.createElement("table")).addClass(h.tree_class).addClass(h.config.dragClass)}else{B=angular.element(d.document.createElement("ul")).addClass(h.tree_class).addClass(h.config.dragClass)}B.css("width",(b.width(h.$element)+10)+"px");B.css("z-index",9999);var O=0;if(F==="tr"){var J=angular.element(d.document.createElement("tbody"));var E=function(Q,P){var R;for(R=0;R<P;R++){O=O+b.height(Q);J.append(Q.clone());if(h.config.hiddenClass){Q.addClass(h.config.hiddenClass)}Q=Q.next()}};E(h.$element,h.node().__dept__);B.append(J)}else{O=O+b.height(h.$element);B.append(h.$element.clone());if(h.config.hiddenClass){h.$element.addClass(h.config.hiddenClass)}}f.css("height",O+"px");h.$element[0].parentNode.insertBefore(f[0],h.$element[0]);c.find("body").append(B);B.css({left:L.pageX-n.offsetX+"px",top:L.pageY-n.offsetY+"px"});angular.element(c).bind("touchend",p);angular.element(c).bind("touchcancel",p);angular.element(c).bind("touchmove",w);angular.element(c).bind("mouseup",p);angular.element(c).bind("mousemove",w);angular.element(c).bind("mouseleave",C);u=Math.max(q.scrollHeight,q.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight);m=Math.max(q.scrollWidth,q.offsetWidth,r.clientWidth,r.scrollWidth,r.offsetWidth)};var z=function(T){if(!l){if(!k){l=true;h.$apply(function(){h.$callbacks.dragStart(g)})}return}var F=b.eventObj(T);var R,V,K;if(B){T.preventDefault();if(d.getSelection){d.getSelection().removeAllRanges()}else{if(d.document.selection){d.document.selection.empty()}}V=F.pageX-n.offsetX;K=F.pageY-n.offsetY;if(V<0){V=0}if(K<0){K=0}if((K+10)>u){K=u-10}if((V+10)>m){V=m-10}B.css({left:V+"px",top:K+"px"});var H=window.pageYOffset||d.document.documentElement.scrollTop;var L=H+(window.innerHeight||d.document.clientHeight||d.document.clientHeight);if(L<F.pageY&&L<=u){window.scrollBy(0,10)}if(H>F.pageY){window.scrollBy(0,-10)}b.positionMoved(T,n,s);if(s){s=false;return}var E=(b.offset(B).left-b.offset(f).left)>=h.config.threshold;var P=F.pageX-d.document.body.scrollLeft;var O=F.pageY-(window.pageYOffset||d.document.documentElement.scrollTop);var M;if(angular.isFunction(B.hide)){B.hide()}else{M=B[0].style.display;B[0].style.display="none"}d.document.elementFromPoint(P,O);var G=angular.element(d.document.elementFromPoint(P,O));if(angular.isFunction(B.show)){B.show()}else{B[0].style.display=M}if(!n.dirAx){var J,I;I=G.scope();if(!I){return}if(I.$type=="TreeTable"&&I.$callbacks.dragEnabled()){return}if(I.$type=="TreeTableNodeHandle"){I=G.scope().$nodeScope}if(I.$type!="TreeTableNode"){return}if(I.$callbacks.dragEnabled()){G=I.$element;var U=b.offset(G);J=I.horizontal?F.pageX<(U.left+b.width(G)/2):F.pageY<(U.top+b.height(G)/2);if(I.accept(h,I,J)){g.level=I.node().__level__;if(J){if(g.isDirty(I.node().__index_real__-1)){g.target=h.getPrev(g.node.__index_real__)}else{g.target=I.prev()}b.replaceIndent(f,g.level);G[0].parentNode.insertBefore(f[0],G[0])}else{G.after(f);g.target=I.node();var S=g.level;if(I.data().__expanded__){S++;g.level=S}b.replaceIndent(f,S)}}}}else{if(n.dirAx&&n.distAxX>=h.config.levelThreshold){n.distAxX=0;var N=g.target;if(N){if(n.distX>0){var Q=h.visible(N);if(Q!=null&&Q.__level__>=g.level){g.level++;b.replaceIndent(f,g.level)}}else{if(n.distX<0&&g.isTargetEmpty()){g.level=g.level-1;b.replaceIndent(f,g.level)}}}}}h.$apply(function(){h.$callbacks.dragMove(g)})}};var v=function(H){H.preventDefault();if(B){var F=false;h.$apply(function(){F=h.$callbacks.beforeDrop(g)});var E=function(J,I){var K;for(K=0;K<I;K++){if(h.config.hiddenClass){J.removeClass(h.config.hiddenClass)}J=J.next()}};E(h.$element,h.node().__dept__);f.remove();B.remove();B=null;var G=false;if(h.$$apply){h.$apply(function(){G=h.$callbacks.dropped(g,F)})}else{y()}h.$apply(function(){h.$callbacks.dragStop(g,G)});h.$$apply=false;g=null}angular.element(c).unbind("touchend",p);angular.element(c).unbind("touchcancel",p);angular.element(c).unbind("touchmove",w);angular.element(c).unbind("mouseup",p);angular.element(c).unbind("mousemove",w);angular.element(d.document.body).unbind("mouseleave",C)};var e=function(E){if(h.$callbacks.dragEnabled()){A(E)}};var w=function(E){z(E)};var p=function(E){h.$$apply=true;v(E)};var C=function(E){v(E)};var y=function(){j.bind("touchstart mousedown",function(E){k=true;l=false;e(E);i=a(function(){k=false},h.dragDelay)});j.bind("touchend touchcancel mouseup",function(){a.cancel(i)})};y();var o=function(E){if(E.keyCode==27){h.$$apply=false;v(E)}};angular.element(d.document.body).bind("keydown",o);h.$on("$destroy",function(){angular.element(d.document.body).unbind("keydown",o)})}}}]).directive("treeTableNodes",function(){return{restrict:"A",replace:true,controller:["$scope","$element","$attrs","tgConfig",function(c,b,a,d){c.$nodeScope=null;c.datas=[]}],link:function(c,b,a){c.$type="TreeTableNodes";c.$element=b;c.$watch(a.treeTableNodes,function(f,d,e){e.datas=f},true);b.addClass("angular-ui-tree-nodes");if(c.$parent.$type=="TreeTableNode"){c.$nodeScope=c.$parent}else{c.$nodeScope=c}c.$element=b}}}).directive("treeTableNodeHandle",function(){return{restrict:"A",scope:true,controller:["$scope","$element","$attrs","tgConfig",function(c,b,a,d){c.$nodeScope=null}],link:function(c,b,a){c.$element=b;c.$type="TreeTableNodeHandle";if(c.$parent.$type=="TreeTableNode"){c.$nodeScope=c.$parent}else{c.$nodeScope=c}if(c.config.handleClass){b.addClass(c.config.handleClass)}}}}).provider("treeTableTemplate",function(){var a="template/treeTable/treeTable.html";this.setPath=function(b){a=b};this.$get=function(){return{getPath:function(){return a}}}}).factory("$TreeTableHelper",["$document","$window",function(b,a){return{calsIndent:null,nodrag:function(c){return(typeof c.attr("data-nodrag"))!="undefined"},eventObj:function(d){var c=d;if(d.targetTouches!==undefined){c=d.targetTouches.item(0)}else{if(d.originalEvent!==undefined&&d.originalEvent.targetTouches!==undefined){c=d.originalEvent.targetTouches.item(0)}}return c},dragInfo:function(c){return{node:c.node(),scope:c,level:c.node().__level__,target:c.prev(),move:{parent:-1,pos:-1},isDirty:function(d){return this.node.__index_real__<=d&&d<=this.node.__index_real__+this.node.__dept__-1},isTargetEmpty:function(){if(this.level==1){return false}var d=this.target;var e=this.node;while(d){if(d.__level__<this.level){if(d.__expanded__){if(d.__children__.length==0){return true}else{if((d.__index_real__==this.target.__parent__&&d.__children__.length-1==this.target.__index__)||(d.__index_real__==e.__parent__&&d.__children__.length-1==e.__index__)){return true}}return false}return true}else{if(d.__parent__==null){return false}else{d=this.scope.tree_rows[d.__parent__]}}}return false},next:function(){if(this.node.__index_real__<this.source.length-1){return this.source[this.node.__index_real__+1]}return null},prev:function(){if(this.node.__index_real__>0){return this.source[this.node.__index_real__-1]}return null}}},height:function(c){return c.prop("scrollHeight")},width:function(c){return c.prop("scrollWidth")},offset:function(c){var d=c[0].getBoundingClientRect();return{width:c.prop("offsetWidth"),height:c.prop("offsetHeight"),top:d.top+(a.pageYOffset||b[0].body.scrollTop||b[0].documentElement.scrollTop),left:d.left+(a.pageXOffset||b[0].body.scrollLeft||b[0].documentElement.scrollLeft)}},positionStarted:function(d,c){var f={};f.offsetX=d.pageX-this.offset(c).left;f.offsetY=d.pageY-this.offset(c).top;f.startX=f.lastX=d.pageX;f.startY=f.lastY=d.pageY;f.nowX=f.nowY=f.distX=f.distY=f.dirAx=0;f.dirX=f.dirY=f.lastDirX=f.lastDirY=f.distAxX=f.distAxY=0;return f},positionMoved:function(f,g,d){g.lastX=g.nowX;g.lastY=g.nowY;g.nowX=f.pageX;g.nowY=f.pageY;g.distX=g.nowX-g.lastX;g.distY=g.nowY-g.lastY;g.lastDirX=g.dirX;g.lastDirY=g.dirY;g.dirX=g.distX===0?0:g.distX>0?1:-1;g.dirY=g.distY===0?0:g.distY>0?1:-1;var c=Math.abs(g.distX)>Math.abs(g.distY)?1:0;if(d){g.dirAx=c;g.moving=true;return}if(g.dirAx!==c){g.distAxX=0;g.distAxY=0}else{g.distAxX+=Math.abs(g.distX);if(g.dirX!==0&&g.dirX!==g.lastDirX){g.distAxX=0}g.distAxY+=Math.abs(g.distY);if(g.dirY!==0&&g.dirY!==g.lastDirY){g.distAxY=0}}g.dirAx=c},replaceIndent:function(f,d,c){c=c?c:"left";angular.element(f.children()[0]).css(c,this.calsIndent(d))},hidden:function(c){if(angular.isFunction(c.hide)){c.hide()}else{displayElm=c[0].style.display;c[0].style.display="none"}}}}]).factory("$TreeTableConvert",function(){return{line2tree:function(d,j,h){if(!d||d.length==0||!j||!h){return[]}var m=[],a=[],k=d[0],b=k[j],l={},e,g,f=d.length,c=0;while(c<f){k=d[c++];b=k[j];l[b]=k;e=k[h];if(e){g=l[e];if(g.__children__){g.__children__.push(k)}else{g.__children__=[k]}}else{a.push(b)}}f=a.length;for(c=0;c<f;c++){m.push(l[a[c]])}return m},tree2tree:function(c,a){var b=function(g){var i=[];var f,d=g.length,h,e;for(f=0;f<d;f++){h=angular.copy(g[f]);if(angular.isArray(h[a])&&h[a].length>0){e=b(h[a]);delete (h[a]);h.__children__=e}i.push(h)}return i};return b(c)}}}).constant("tgConfig",{treeClass:"tree-table",emptyTreeClass:"tree-table-empty",hiddenClass:"tree-table-hidden",nodeClass:"tree-table-row",handleClass:"tree-table-handle",placeHolderClass:"tree-table-placeholder",dragClass:"tree-table-drag",levelThreshold:30})}).call(window);