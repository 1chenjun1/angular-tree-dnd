<!DOCTYPE html>
<html ng-app="treeTableTest">
<head>
    <meta charset="utf-8" />
    <title>AngularJS Angular-Tree-Table</title>
    <script>document.write('<base href="' + document.location + '" />');</script>
    <script src="../src/angular.js"></script>
    <script src="controller.js"></script>
    <script src="../src/ng-tree-table.js"></script>
    <link rel="stylesheet" href="../src/bootstrap.css">
    <link rel="stylesheet" href="../src/ng-tree-table.css">
</head>
<body ng-controller="CategoryMenuController" style="margin:20px">
<div class="row">
    <h1 class="text-center">angular-tree-table</h1>
    <h4 class=" text-center text-info">[Angular 1.x] Display Tree Table & Event DrapnDrop</h4>
    <h4 class=" text-center text-info">A Grid That display data tree by AngularJS, using CSS animation and Bootstrap style</h4>

    <div class="btn-group btn-sm">
        <a class="btn btn-success" href="https://github.com/thienhung1989/angular-tree-table">Code on github</a>
        <button class="btn btn-success" ng-click="showlog = !showlog"
                href="">{{ (!showlog) ? 'Show Log' : 'Show Tree'}}
        </button>
        <button class="btn btn-success" ng-show="!showlog"
                ng-click="ShowTreeTable = (!ShowTreeTable || ShowTreeTable == 1 ? 2 : 1)"
                href="">{{ (showTreeTable == 1) ? 'Show Tree 1' : 'Show Tree 2'}}
        </button>
        <button class="btn btn-info" ng-click="ShowAction = !ShowAction"
                href="">{{ ShowAction ? 'Hide Action' : 'Show Action'}}
        </button>
    </div>
</div>
<div class="row">
    <div ng-if="ShowAction" ng-class="ShowAction ? 'col-xs-2' :''">
        <div class="btn-group-vertical btn-sm">
            <button class="btn btn-success btn-sm" ng-disabled="true"><b>--- Directive ---</b></button>
            <button ng-click="my_tree.expand_all()" class="btn btn-default btn-sm">expand_all</button>
            <button ng-click="my_tree.collapse_all()" class="btn btn-default btn-sm">collapse_all</button>
            <button ng-click="log=my_tree.select_first_branch()" class="btn btn-default btn-sm">select_first_branch
            </button>
            <button ng-click="log=my_tree.select_next_branch(branch)" class="btn btn-default btn-sm">select_next_branch
            </button>
            <button ng-click="log=my_tree.select_prev_branch(branch)" class="btn btn-default btn-sm">select_prev_branch
            </button>
            <button ng-click="log=my_tree.select_next_sibling(branch)"
                    class="btn btn-default btn-sm">select_next_sibling
            </button>
            <button ng-click="log=my_tree.select_prev_sibling(branch)"
                    class="btn btn-default btn-sm">select_prev_sibling
            </button>
            <button ng-click="log=my_tree.select_parent_branch(branch)"
                    class="btn btn-default btn-sm">select_parent_branch
            </button>
            <button ng-click="my_tree.expand_branch(branch)" class="btn btn-default btn-sm">expand_branch</button>
            <button ng-click="my_tree.collapse_branch(branch)" class="btn btn-default btn-sm">collapse_branch</button>
            <button class="btn btn-success btn-sm" ng-disabled="true"><b>--- Event ---</b></button>
            <button ng-click="log=my_tree.last_descendant(branch)" class="btn btn-default btn-sm">last_descendant
            </button>
            <button ng-click="branch=my_tree.get_selected_branch()" class="btn btn-default btn-sm">get_selected_branch
            </button>
            <button ng-click="log=my_tree.get_first_child(branch)" class="btn btn-default btn-sm">get_first_child
            </button>
            <button ng-click="log=my_tree.get_children(branch)" class="btn btn-default btn-sm">get_children</button>
            <button ng-click="log=my_tree.get_first_branch()" class="btn btn-default btn-sm">get_first_branch</button>
            <button ng-click="log=my_tree.get_next_branch(branch)" class="btn btn-default btn-sm">get_next_branch
            </button>
            <button ng-click="log=my_tree.get_prev_branch(branch)" class="btn btn-default btn-sm">get_prev_branch
            </button>
            <button ng-click="log=my_tree.get_parent_branch(branch)" class="btn btn-default btn-sm">get_parent_branch
            </button>
            <button ng-click="log=my_tree.get_next_sibling(branch)" class="btn btn-default btn-sm">get_next_sibling
            </button>
            <button ng-click="log=my_tree.get_prev_sibling(branch)" class="btn btn-default btn-sm">get_prev_sibling
            </button>
            <button ng-click="log=my_tree.get_siblings(branch)" class="btn btn-default btn-sm">get_siblings</button>
            <button ng-click="log=my_tree.get_closest_ancestor_next_sibling(branch)"
                    class="btn btn-default btn-sm">get_closest_ancestor_next_sibling
            </button>
        </div>
    </div>
    <div ng-class="ShowAction ? 'col-xs-10' :''">
        <pre ng-show="showlog">{{ log | json }}</pre>
        <div ng-show="!showlog" class="row">
            <div class="col-md-7">
                <tree-table tree-data="tree_data" tree-control="my_tree" drag-enabled="true"
                            primary-key="'DemographicId'" column-defs="col_defs" expand-on="expanding_property"
                            on-select="select_handler()" on-click="click_handler()" indent="30" indent-plus="20"
                            indent-unit="px" enable-hotkey="true" enable-drag="true" enable-status="true"
                            enable-move="true"></tree-table>
            </div>
            <div class="col-md-5">
                <script type="text/ng-template" id="tree-table-template-render.html">
                    <ul tree-table-nodes="tree_data">
                        <li tree-table-node="row" ng-repeat="row in datas track by row.__hashKey__"
                            ng-show="row.__visible__" compile="expandingProperty.cellTemplate"
                            ng-include="'tree-table-template-fetch.html'"></li>
                    </ul>
                </script>
                <script type="text/ng-template" id="tree-table-template-fetch.html">
                    <div class="list-group-item"
                         ng-class="(row.__selected__ ? 'list-group-item-success':'')"
                         ng-click="onClick(row)"
                         ng-style="expandingProperty.cellStyle ? expandingProperty.cellStyle : {}">

                        <a class="btn btn-default" aria-label="Justify" type="button" tree-table-node-handle>
                            <span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span>
                        </a>

                        {{row[expandingProperty.field] || row[expandingProperty]}}

                        <span ng-class="$iconClass" ng-click="toggleExpand(row)"></span>
                        <div class="pull-right">
                            <span ng-repeat="col in colDefinitions" ng-class="col.cellClass" ng-style="col.cellStyle"
                                  compile="col.cellTemplate">
                                {{row[col.field]}}
                            </span>
                        </div>
                    </div>
                    <ul tree-table-nodes="row.__children__">
                        <li tree-table-node="row" ng-repeat="row in datas track by row.__hashKey__"
                            ng-show="row.__visible__" compile="expandingProperty.cellTemplate"
                            ng-include="'tree-table-template-fetch.html'"></li>
                    </ul>
                </script>
                <tree-table tree-data="tree_data"
                            tree-control="my_tree"
                            column-defs="col_defs_min"
                            expand-on="expanding_property"
                            on-select="select_handler(branch)"
                            on-click="click_handler(branch)"
                            template-url="tree-table-template-render.html"
                            icon-leaf="none"
                            icon-expand="glyphicon glyphicon-chevron-down"
                            icon-collapse="glyphicon glyphicon-chevron-right"
                        ></tree-table>
            </div>
        </div>
    </div>
</div>
</body>
</html>
